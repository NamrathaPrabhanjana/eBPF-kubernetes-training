
- Setup a simple ebpf ddos attck detector to deploy on the kube cluster (from ddos-attck folder)
  - Setup container
    - Build: docker build . -t ddos-attack-detector:1.0 (with Dockerfile in ddos-attack folder)
    - Execute: docker run -u root -v /sys/kernel/debug:/sys/kernel/debug:Z --privileged -it ddos-attack-detector:1.0 bash
    - Execute the bpf program within the container: ./ddos_attack.py (python3 ddos_attack.py)
  - Copy the created container to microk8s' registry
    - docker save ddos-attack-detector:1.0 > ddos-attack-detector-1-0.tar 
    - microk8s ctr image import ddos-attack-detector-1-0.tar
    - microk8s ctr image ls
  - Setup pod (with the above container) as a daemonset
    - microk8s kubectl apply -f ddos-attack-detector-deployment.yml
    - microk8s kubectl get pods
  - Ensure pod is running well
    - microk8s kubectl logs <podname>
    - microk8s kubectl describe pod <podname>
  - View the attached bpf program and map contents
    - bpftool prog list
  - Get the local IP:
    - microk8s kubectl get nodes -o wide
    - View the nginx page here: http://<local-ip>:30080 (the port was set in the frontend.yml file while setting up additional pods)
  - Simulate ddos attack:
    sudo hping3 <local-ip> -p 30080 -i u100 #100microsec gap between 2 packets
